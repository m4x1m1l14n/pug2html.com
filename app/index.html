<!doctype html>
<html lang="en">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description"
		content="Pug 2 HTML is free online tool to compile and render pug templates into HTML with realtime preview.">
	<meta name="keywords" content="pug, jade, html, compile,  render, convert, free, tool">

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-6R0SGHB0VJ"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'G-6R0SGHB0VJ');
	</script>

	<link rel="shortcut icon" href="images/favicon.ico">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
		integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

	<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js"></script>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="style/default.css">

	<title>Pug 2 HTML converter</title>

	<!-- Facebook Pixel Code -->
	<script>
		!function (f, b, e, v, n, t, s)
		{
			if (f.fbq) return; n = f.fbq = function ()
			{
				n.callMethod ?
					n.callMethod.apply(n, arguments) : n.queue.push(arguments)
			};
			if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
			n.queue = []; t = b.createElement(e); t.async = !0;
			t.src = v; s = b.getElementsByTagName(e)[0];
			s.parentNode.insertBefore(t, s)
		}(window, document, 'script',
			'https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '377859033343445');
		fbq('track', 'PageView');
	</script>
	<noscript>
		<img height="1" width="1" style="display:none"
			src="https://www.facebook.com/tr?id=377859033343445&ev=PageView&noscript=1" />
	</noscript>
	<!-- End Facebook Pixel Code -->
</head>

<body>
	<div style="height: 95%;">
		<div class="d-flex flex-column h-100">
			<div>
				<nav class="navbar navbar-expand-sm">
					<a class="navbar-brand" href="https://pug2html.com">
						<img src="images/pug_logo.svg" height="32" class="d-inline-block align-top" alt="">
						#{Pug2HTML}
					</a>

					<button class="navbar-toggler" type="button" data-toggle="collapse"
						data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
						aria-expanded="false" aria-label="Toggle navigation">
						<span class="navbar-toggler-icon"></span>
					</button>

					<div class="collapse navbar-collapse" id="navbarSupportedContent">
						<ul class="navbar-nav mr-auto">
							<li class="nav-item">
								<a class="nav-link" href="https://pugjs.org/" target="_blank">PUG official</a>
							</li>
							<li class="nav-item dropdown">
								<a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
									data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									GitHub
								</a>
								<div class="dropdown-menu" aria-labelledby="navbarDropdown">
									<a class="dropdown-item" href="https://github.com/m4x1m1l14n"
										target="_blank">Author</a>
									<a class="dropdown-item" href="https://github.com/m4x1m1l14n/pug2html.com"
										target="_blank">Project</a>
									<!-- <div class="dropdown-divider"></div> -->
									<a class="dropdown-item" href="https://github.com/m4x1m1l14n/pug2html.com/issues"
										target="_blank">Issues</a>
								</div>
							</li>
						</ul>

						<form action="https://www.paypal.com/donate" method="post" target="_top" class="form-inline">
							<input type="hidden" name="cmd" value="_donations" />
							<input type="hidden" name="business" value="WZ5UGW93SUEA8" />
							<input type="hidden" name="currency_code" value="EUR" />
							<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif"
								border="0" name="submit" title="PayPal - The safer, easier way to pay online!"
								alt="Donate with PayPal button" />
							<img alt="" border="0" src="https://www.paypal.com/en_SK/i/scr/pixel.gif" width="1"
								height="1" />
						</form>
					</div>
				</nav>

				<div>
					<p class="pb-1 px-1">
						If you found this page helpful, I'll be happy if you contribute to the operation of the hosting
						and
						domain via paypal donation. Thank you very much! &#128522;
					</p>
				</div>
			</div>

			<div class="flex-grow-1">
				<div class="row h-100 no-gutters">
					<div class="col-md h-100 d-flex flex-column px-1 pb-2">
						<div>
							<ul class="nav nav-tabs">
								<li class="nav-item">
									<a class="nav-link active">PUG</a>
								</li>
							</ul>
						</div>

						<div id="editor-input" class="flex-grow-1"></div>
					</div>

					<div class="col-md h-100 d-flex flex-column px-1 pb-2">
						<div>
							<ul class="nav nav-tabs" id="myTab" role="tablist">
								<li class="nav-item">
									<a class="nav-link active" id="html-tab" data-toggle="tab" href="#html" role="tab"
										aria-controls="html" aria-selected="true">HTML</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" id="preview-tab" data-toggle="tab" href="#preview" role="tab"
										aria-controls="preview" aria-selected="false">Preview</a>
								</li>
							</ul>
						</div>

						<div class="flex-grow-1 tab-content" id="myTabContent">
							<div class="tab-pane fade h-100 show active" id="html" role="tabpanel"
								aria-labelledby="html-tab">
								<div id="editor-output" class="h-100"></div>
							</div>
							<div class="tab-pane fade h-100" id="preview" role="tabpanel" aria-labelledby="preview-tab">
								<iframe id="frame" class="w-100 h-100" frameBorder="0" style="background-color: white;">
								</iframe>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="px-1">
		<button type="button" class="btn btn-primary"><i class="fa fa-share" aria-hidden="true"></i> Share</button>
	</div>

	<div class="px-1 pb-3">
		<div>
			<h3>Motivation</h3>
			<p>
				Project I'm workig on for a few years used custom e-mail template implementation till now (you know, e-mail
				templates written in HTML code with embedded CSS, loading to project as string and replacing placeholders
				with RegEx etc) and I decided to use something widely used and simple so I ended up with pugjs. Found lot of
				online tools for realtime "rendering" pug into HTML, but each was missing direct preview of generated HTML
				code. That was motivation for me to create simple to use realtime pug to HTML converter with built-in
				preview of generated HTML code.
			</p>
		</div>

		<div class="text-center">
			<small class="text-muted">Created by <a href="https://github.com/m4x1m1l14n">m4x1m1l14n</a></small>
		</div>
	</div>

	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
		integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
		integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.12/ace.js"
		integrity="sha512-GZ1RIgZaSc8rnco/8CXfRdCpDxRCphenIiZ2ztLy3XQfCbQUSCuk8IudvNHxkRA3oUg6q0qejgN/qqyG1duv5Q=="
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/js-cookie@rc/dist/js.cookie.min.js"></script>
	<script src="https://pugjs.org/js/pug.js"></script>

	<script type="text/javascript">
		function generateSessionID()
		{
			var maxSafeInteger = typeof Number.MAX_SAFE_INTEGER === 'undefined'
				? 9007199254740991
				: Number.MAX_SAFE_INTEGER;

			return Math.ceil( Math.random() * maxSafeInteger );
		}

		function getSessionID()
		{
			let sessionID = parseInt(Cookies.get('sessionID'));
			if (isNaN(sessionID))
			{
				sessionID = generateSessionID();

				Cookies.set('sessionID', sessionID.toString(), { path: '', expires: 7, domain: 'pug2html.com' });
			}

			return sessionID;
		}

		var sessionID = getSessionID();

		console.log(`Using session id ${sessionID}`);

		// $.get(`http://localhost:3000/api/share?sessionID=${sessionID}`)
		// 	.done(function(data) {
		// 		console.log(data);
		// 	})
		// 	.fail(function(xhr, statusText, error) {
		// 		console.error(xhr, statusText, error);
		// 	})

		$(document).ready(function ()
		{
			var pug = require('pug');
			var editor = ace.edit('editor-input');
			var output = ace.edit('editor-output');

			var theme = 'solarized_light';

			editor.setFontSize(12);
			editor.setTheme('ace/theme/' + theme);
			editor.session.setMode('ace/mode/jade');
			editor.session.on('change', function ()
			{
				var value = editor.session.getValue();

				try
				{
					var html = pug.render(value, {
						pretty: true
					});

					output.session.setValue(html);

					$('#frame').contents().find('html').html(html);

					localStorage.setItem('content', value);
				}
				catch (error)
				{
					// console.error(error);
				}
			});

			output.setFontSize(12);
			output.setTheme('ace/theme/' + theme);
			output.session.setMode('ace/mode/html');
			output.setReadOnly(true);

			var content = localStorage.getItem('content');
			if (!content)
			{
				content = 'doctype\r\nhtml\r\n  head\r\n    style(type=\"text\/css\").\r\n      body, html {\r\n        margin: 0;\r\n        padding: 0;\r\n        height: 100%;\r\n      }\r\n          \r\n      .outer {\r\n        display: table;\r\n        width: 100%;\r\n        height: 100%;\r\n      }\r\n      \r\n      .inner {\r\n          display: table-cell;\r\n          vertical-align: middle;\r\n          text-align: center;\r\n      }\r\n\r\n  body\r\n    .outer\r\n      .inner YEAHAAA!!!';
			}

			editor.session.setValue(content);

			// new ClipboardJS('.btn');
			$('.btn').click(function(event)
			{
				let content = editor.session.getValue();
				let data =
				{
					sessionID,
					content
				};

				$.post('http://localhost:3000/api/share', data)
					.done(function(response)
					{
						console.log(response);
					})
					.fail(function(xhr, statusText, error)
					{
						console.log(xhr, statusText, error);
					});
			});
		});

	</script>
</body>

</html>